<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="manifest" href="/manifest.json?_ijt=9br29rbfb5bf2i01qheaqsr8uk">
    <meta name="keywords"
          content="photography,media,portfolio">
    <meta name="description" content="A mysterious adventure begins, you have quests to do adventurer!">
    <title>Mystery Adventure</title>
    <script class="u-script" type="text/javascript" src="/jquery-1.9.1.min.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <meta name="theme-color" content="#27A59A"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": ""
    }</script>
    <meta name="theme-color" content="#73a3de">
    <meta property="og:title" content="Mystery Adventure">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://yumna.pro/android-chrome-192x192.png">
    <meta property="og:site_name" content="Mystery Adventure">

    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body style="background-color: black;color: white" class="mt-4 mb-4">
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>

<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyBUCSAxNMbgZGGdoiHia2bNC_BcTnyDxiM",
        authDomain: "yumna-website.firebaseapp.com",
        projectId: "yumna-website",
        storageBucket: "yumna-website.appspot.com",
        messagingSenderId: "293455560102",
        appId: "1:293455560102:web:03f93a48809c5d7cbfe367",
        measurementId: "G-R96T2NY7SR"
    };
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const db = firebase.firestore();

    const collection = db.collection('actions');


</script>
<div class="container">
    <div class="text-center">
        <h1>Mysterious Adventure</h1>
        <div id="top-caption">
            <p>This just came, the maker is weirdly going all in on this. Check the quest log for details.</p>
        </div>

        <div class="accordion accordion-flush text-start" id="accordionFlushExample">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"
                            id="quest1title">
                        Quest 1: Keys To Our Love (Completed)
                    </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body" id="quest1">
                        <p>This Quest is complete!</p>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo"
                            id="quest2title">
                        Quest 2: Artifact of Our Dreams (Completed)
                    </button>
                </h2>
                <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body" id="quest2">
                        <p>Congratulations on finding the amulet!!! You can keep it, it is yours are yours, make sure to add it to the office keychain you will need that for your next quest!. Hang tight for the next quest!</p>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseThree" aria-expanded="false"
                            aria-controls="flush-collapseThree">
                        Quest 3: The Rouaded Bee Feeder
                    </button>
                </h2>
                <div id="flush-collapseThree" class="accordion-collapse collapse"
                     data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">
                        <p>So, this came all of the sudden, you should go in search for the rounded Bee feeder, I don't know where it is or how it's gonna look... Good luck</p>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseFour" aria-expanded="false"
                            aria-controls="flush-collapseThree">
                        Quest 4: Coming Soon
                    </button>
                </h2>
                <div id="flush-collapseFour" class="accordion-collapse collapse"
                     data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">&#129324;</div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

<script>

    let keysFound = false;
    collection.doc('found').get().then(snapshot => {
        if (snapshot.exists) {
            if (snapshot.data().amuletFound) {
                keysFound = true;
                console.log('UPDATING')
                const div1 = document.getElementById('top-caption');
                div.innerHTML = '<p>YOU FOUND IT!!! check the quest log for quest 2 for further info to your next quest</p>';
                const div = document.getElementById('quest2');
                div.innerHTML = '<p>Congratulations on finding the amulet!!! You can keep it, it is yours are yours, make sure to add it to the office keychain you will need that for your next quest!. Hang tight for the next quest!</p>';
                const titleDiv = document.getElementById('quest2title');
                titleDiv.innerHTML = 'Quest 2: Artifact of Our Dreams (Completed)'
            }
        }
    })

    if (keysFound) {


    } else {
        const button = document.getElementById('button-addon2');
        const input = document.getElementById('password_input_1');

        // button.addEventListener('click', async () => {
        //     if (input.value === 'ILoveU28') {
        //         try {
        //             const collection = db.collection('actions');
        //             const ID = collection.doc('found').set({
        //                 created: Date.now(),
        //             })
        //                 .then(() => {
        //                     console.log('Data has been saved successfully !')
        //                 })
        //                 .catch(error => {
        //                     console.error(error)
        //                 });
        //         } catch (e) {
        //             console.error("Error adding document: ", e);
        //         }
        //
        //         const link = 'https://1drv.ms/i/s!Aps37J07mtTolqJiFFurLNd3kqdHRA';
        //         window.open(link, "_self");
        //     }
        // })
    }


    if ('serviceWorker' in navigator) {
        const messaging = firebase.messaging()
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
            .then((register) => {
                messaging.requestPermission().then(() => {
                    messaging.getToken()
                        .then((fcmToken) => {
                            console.log(fcmToken)
                            // subscribeTokenToTopic(fcmToken, 'user-{{ Auth()->id() }}');
                            // subscribeTokenToTopic(fcmToken, 'all');
                            // subscribeTokenToTopic(fcmToken, 'frontend');
                            // messaging.onMessage((payload) => {
                            //     console.log("onMessage event fired", payload)
                            //     let showNotification = document.visibilityState !== "visible";
                            //     if (showNotification) {
                            //         // Notification code
                            //         Notification.requestPermission().then(function (permission) {
                            //             console.log(permission);
                            //             var title = payload.data.title;
                            //             var body = payload.data.body;
                            //             var notification = new Notification(title, {body});
                            //
                            //         });
                            //     }
                            //
                            // })
                        });
                });
            })
    } else {
        console.log('Service Worker not supported')
    }
</script>
</body>
</html>
