<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="manifest" href="/manifest.json?_ijt=9br29rbfb5bf2i01qheaqsr8uk">
    <meta name="keywords"
          content="photography,media,portfolio">
    <meta name="description" content="A mysterious adventure begins, you have quests to do adventurer!">
    <title>Mystery Adventure</title>
    <script class="u-script" type="text/javascript" src="/jquery-1.9.1.min.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <meta name="theme-color" content="#27A59A"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": ""
    }</script>
    <meta name="theme-color" content="#73a3de">
    <meta property="og:title" content="Mystery Adventure">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://yumna.pro/android-chrome-192x192.png">
    <meta property="og:site_name" content="Mystery Adventure">

    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body style="background-color: black;color: white" class="mt-4 mb-4">
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>

<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyBUCSAxNMbgZGGdoiHia2bNC_BcTnyDxiM",
        authDomain: "yumna-website.firebaseapp.com",
        projectId: "yumna-website",
        storageBucket: "yumna-website.appspot.com",
        messagingSenderId: "293455560102",
        appId: "1:293455560102:web:03f93a48809c5d7cbfe367",
        measurementId: "G-R96T2NY7SR"
    };
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const db = firebase.firestore();

    const collection = db.collection('actions');


</script>
<div class="container">
    <div class="text-center">
        <h1>Mysterious Adventure</h1>
        <p>Greetings adventurer, so I see you've completed your first quest, nice job!</p>
        <p>Keep a look-out for the next one!</p>

        <div class="accordion accordion-flush text-start" id="accordionFlushExample">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"
                            id="quest1title">
                        Quest 1: Keys To Our Love
                    </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body" id="quest1">
                        <p>Here we are, your first quest. Excited aren't you?</p>
                        <p>The clan of goblins has stolen the king's keys, and we need a brave adventurer like you to
                            figure out the riddles
                            and get them back.</p>
                        <p>This quest is made of two parts:</p>
                        <ul>
                            <li>The first part is to figure out the riddle that will reveal the password to the map
                                which will show where those pesky goblins hid the keys,
                            </li>
                            <li>The second part is to follow the map and find where the keys are hidden then steal them
                                back.
                            </li>
                        </ul>
                        <p>Here's the riddle that the goblins left behind:</p>
                        <p style="font-style: italic">A place filled with computing where people come and go, in a
                            sanctum where waves are in micro shape, under the great circle of heed, there you'll find a
                            code to what you need!</p>
                        <div>
                            <div class="input-group mb-3">
                                <!-- HAHAHAHHAHA SO YOU ARE TRYING TO HACK THIS... JUST DO IT YOU CAN'T HACK IT                               -->
                                <input type="text" class="form-control" placeholder="Pass Code" aria-label="Pass Code"
                                       aria-describedby="button-addon2" id="password_input_1">
                                <button class="btn btn-outline-secondary" type="button" id="button-addon2">GO</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Quest 2: Coming Soon
                    </button>
                </h2>
                <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">I said it's coming soon, you know how to read! right?</div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseThree" aria-expanded="false"
                            aria-controls="flush-collapseThree">
                        Quest 3: Coming Soon
                    </button>
                </h2>
                <div id="flush-collapseThree" class="accordion-collapse collapse"
                     data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">So, you're still looking here, come back later I assure you a quest will
                        be available soon here!
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseFour" aria-expanded="false"
                            aria-controls="flush-collapseThree">
                        Quest 4: Coming Soon
                    </button>
                </h2>
                <div id="flush-collapseFour" class="accordion-collapse collapse"
                     data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">&#129324;</div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

<script>

    let keysFound = false;
    collection.doc('found').get().then(snapshot => {
        if (snapshot.exists) {
            if (snapshot.data().keysFound) {
                keysFound = true;
                console.log('UPDATING')
                const div = document.getElementById('quest1');
                div.innerHTML = '<p>Congratulations on finding the keys!!! You can keep them they are yours, you can open the office now... You wil need it!. Hang tight for the next quest!</p>';
                const titleDiv = document.getElementById('quest1title');
                titleDiv.innerHTML = 'Quest 1: Keys To Our Love (Completed)'
            }
        }
    })

    if (keysFound) {


    } else {
        const button = document.getElementById('button-addon2');
        const input = document.getElementById('password_input_1');

        button.addEventListener('click', async () => {
            if (input.value === 'ILoveU28') {
                try {
                    const collection = db.collection('actions');
                    const ID = collection.doc('found').set({
                        created: Date.now(),
                    })
                        .then(() => {
                            console.log('Data has been saved successfully !')
                        })
                        .catch(error => {
                            console.error(error)
                        });
                } catch (e) {
                    console.error("Error adding document: ", e);
                }

                const link = 'https://1drv.ms/i/s!Aps37J07mtTolqJiFFurLNd3kqdHRA';
                window.open(link, "_self");
            }
        })
    }


    if ('serviceWorker' in navigator) {
        const messaging = firebase.messaging()
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
            .then((register) => {
                messaging.requestPermission().then(() => {
                    messaging.getToken()
                        .then((fcmToken) => {
                            console.log(fcmToken)
                            // subscribeTokenToTopic(fcmToken, 'user-{{ Auth()->id() }}');
                            // subscribeTokenToTopic(fcmToken, 'all');
                            // subscribeTokenToTopic(fcmToken, 'frontend');
                            messaging.onMessage((payload) => {
                                console.log("onMessage event fired", payload)
                                let showNotification = document.visibilityState !== "visible";
                                if (showNotification) {
                                    // Notification code
                                    Notification.requestPermission().then(function (permission) {
                                        console.log(permission);
                                        var title = payload.data.title;
                                        var body = payload.data.body;
                                        var notification = new Notification(title, {body});

                                    });
                                }

                            })
                        });
                });
            })
    } else {
        console.log('Service Worker not supported')
    }
</script>
</body>
</html>
