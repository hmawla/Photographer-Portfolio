<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="manifest" href="/manifest.json?_ijt=9br29rbfb5bf2i01qheaqsr8uk">
    <meta name="keywords"
          content="photography,media,portfolio">
    <meta name="description" content="A mysterious adventure begins, you have quests to do adventurer!">
    <title>Mystery Adventure</title>
    <script class="u-script" type="text/javascript" src="/jquery-1.9.1.min.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <meta name="theme-color" content="#27A59A"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": ""
    }</script>
    <meta name="theme-color" content="#73a3de">
    <meta property="og:title" content="Mystery Adventure">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://yumna.pro/android-chrome-192x192.png">
    <meta property="og:site_name" content="Mystery Adventure">

    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body style="background-color: black;color: white" class="mt-4 mb-4">
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>

<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyBUCSAxNMbgZGGdoiHia2bNC_BcTnyDxiM",
        authDomain: "yumna-website.firebaseapp.com",
        projectId: "yumna-website",
        storageBucket: "yumna-website.appspot.com",
        messagingSenderId: "293455560102",
        appId: "1:293455560102:web:03f93a48809c5d7cbfe367",
        measurementId: "G-R96T2NY7SR"
    };
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const db = firebase.firestore();

    const collection = db.collection('actions');


</script>
<div class="container">
    <div class="text-center">
        <h1>Mysterious Adventure</h1>
        <div id="top-caption">
            <p>It's time to finish this once and for all, let's go get the Goblin King!</p>
            <p>Check the quest log for more details!</p>
        </div>

        <div class="accordion accordion-flush text-start" id="accordionFlushExample">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"
                            id="quest1title">
                        Quest 1: Keys To Our Love (Completed)
                    </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body" id="quest1">
                        <p>This Quest is complete!</p>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo"
                            id="quest2title">
                        Quest 2: Artifact of Our Dreams (Completed)
                    </button>
                </h2>
                <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body" id="quest2">
                        <p>Congratulations on finding the amulet!!! You can keep it, it is yours are yours, make sure to
                            add it to the office keychain you will need that for your next quest!. Hang tight for the
                            next quest!</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseThree" aria-expanded="false"
                                aria-controls="flush-collapseThree">
                            Quest 3: The Rouaded Bee Feeder (Completed)
                        </button>
                    </h2>
                    <div id="flush-collapseThree" class="accordion-collapse collapse"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <p>This is done! please ignore!</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#flush-collapseFour" aria-expanded="false"
                                aria-controls="flush-collapseThree">
                            Quest 4: The Goblin King's Final Boss Fight
                        </button>
                    </h2>
                    <div id="flush-collapseFour" class="accordion-collapse collapse"
                         data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body" id="body1" style="display: block">Our intel just told me that they
                            have located the Goblin King. They should send us a clue soon. So, stay tuned!
                        </div>
                        <div class="accordion-body" id="body2" style="display: none">
                            Our intel has found out a clue but it needs a code.
                            <p>This is what the clue said</p>
                            <ul>
                                <li>
                                    Match the correct colors to find the King
                                </li>
                                <li>Silver: 28</li>
                                <li>Red: 78</li>
                                <li>Black: 9112</li>
                                <li>Green: 06</li>
                                <li>Yellow: 1998</li>
                            </ul>
                            <div>So I don't know if you have any clue of how to solve this, maybe it's related to the keychain</div>
                            <div>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" placeholder="Pass Code"
                                           aria-label="Pass Code"
                                           aria-describedby="button-addon2" id="password_input_1">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2">GO
                                    </button>
                                </div>
                                <h2 style="display: none" id="final">The Goblin King Is Behind YOU!!!!</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"></script>

    <script>

        let finalBattle = false;
        collection.doc('found').get().then(snapshot => {
            if (snapshot.exists) {
                if (snapshot.data().finalBattle) {
                    finalBattle = true;
                    document.getElementById('body1').style.display = 'none'
                    document.getElementById('body2').style.display = 'block'
                    // keysFound = true;
                    // console.log('UPDATING')
                    // const div1 = document.getElementById('top-caption');
                    // div.innerHTML = '<p>YOU FOUND IT!!! check the quest log for quest 2 for further info to your next quest</p>';
                    // const div = document.getElementById('quest2');
                    // div.innerHTML = '<p>Congratulations on finding the amulet!!! You can keep it, it is yours are yours, make sure to add it to the office keychain you will need that for your next quest!. Hang tight for the next quest!</p>';
                    // const titleDiv = document.getElementById('quest2title');
                    // titleDiv.innerHTML = 'Quest 2: Artifact of Our Dreams (Completed)'
                }
            }
        })


        const button = document.getElementById('button-addon2');
        const input = document.getElementById('password_input_1');
        const h2 = document.getElementById('final');

        button.addEventListener('click', async () => {
            console.log(input.value)
            if (input.value === '28061998') {
                try {
                    h2.style.display = 'block';
                } catch (e) {
                    console.error("Error adding document: ", e);
                }
            }
        })


        if ('serviceWorker' in navigator) {
            const messaging = firebase.messaging()
            navigator.serviceWorker.register('/firebase-messaging-sw.js')
                .then((register) => {
                    messaging.requestPermission().then(() => {
                        messaging.getToken()
                            .then((fcmToken) => {
                                console.log(fcmToken)
                                // subscribeTokenToTopic(fcmToken, 'user-{{ Auth()->id() }}');
                                // subscribeTokenToTopic(fcmToken, 'all');
                                // subscribeTokenToTopic(fcmToken, 'frontend');
                                // messaging.onMessage((payload) => {
                                //     console.log("onMessage event fired", payload)
                                //     let showNotification = document.visibilityState !== "visible";
                                //     if (showNotification) {
                                //         // Notification code
                                //         Notification.requestPermission().then(function (permission) {
                                //             console.log(permission);
                                //             var title = payload.data.title;
                                //             var body = payload.data.body;
                                //             var notification = new Notification(title, {body});
                                //
                                //         });
                                //     }
                                //
                                // })
                            });
                    });
                })
        } else {
            console.log('Service Worker not supported')
        }
    </script>
</body>
</html>
